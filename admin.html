<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dasabodha Post Admin</title>

<style>
body{
font-family:Arial;
background:#f4f6f9;
padding:20px;
margin:0;
}
.container{
max-width:900px;
margin:auto;
background:#ffffff;
padding:25px;
border-radius:12px;
box-shadow:0 4px 15px rgba(0,0,0,0.1);
}
h2{
text-align:center;
color:#002366;
}
label{
font-weight:bold;
}
input, textarea{
width:100%;
padding:10px;
margin:8px 0 15px 0;
border-radius:6px;
border:1px solid #ccc;
font-size:14px;
}
textarea{
min-height:200px;
font-family:monospace;
}
button{
padding:10px 18px;
border:none;
border-radius:6px;
background:#007BFF;
color:white;
cursor:pointer;
font-weight:bold;
}
button:hover{
opacity:0.9;
}
.output{
background:#f1f1f1;
padding:15px;
border-radius:6px;
white-space:pre-wrap;
font-family:monospace;
margin-top:15px;
}
.success{
color:green;
font-weight:bold;
margin-top:10px;
}
</style>
</head>
<body>

<div class="container">

<h2>Dasabodha Post Generator</h2>

<label>Post ID:</label>
<input type="number" id="postId" placeholder="Example: 5">

<label>Post Title:</label>
<input type="text" id="title" placeholder="Enter post title">

<label>Post Content (HTML allowed):</label>
<textarea id="content" placeholder="<p>Your content here</p>"></textarea>

<button onclick="generatePost()">Generate JSON</button>

<h3>Generated JSON Object:</h3>
<div class="output" id="output"></div>

<button onclick="copyJSON()">Copy JSON</button>
<div id="copyMsg" class="success"></div>

</div>

<script>

// Auto Slug Generator
function generateSlug(text){
return text.toLowerCase()
.trim()
.replace(/[^a-z0-9\s-]/g,'')
.replace(/\s+/g,'-')
.replace(/-+/g,'-');
}

// Escape content safely
function escapeContent(str){
return str
.replace(/\\/g,'\\\\')
.replace(/"/g,'\\"')
.replace(/\n/g,'\\n')
.replace(/\r/g,'');
}

function generatePost(){

const id = document.getElementById("postId").value.trim();
const title = document.getElementById("title").value.trim();
const content = document.getElementById("content").value.trim();

if(!id || !title || !content){
alert("Please fill all fields.");
return;
}

const slug = generateSlug(title);
const today = new Date().toISOString().split("T")[0];

const jsonObject = 
`{
    "id": ${id},
    "title": "${title}",
    "slug": "${slug}",
    "content": "${escapeContent(content)}",
    "created": "${today}"
}`;

document.getElementById("output").textContent = jsonObject;
document.getElementById("copyMsg").textContent = "";
}

function copyJSON(){
const text = document.getElementById("output").textContent;
if(!text){
alert("Generate JSON first.");
return;
}
navigator.clipboard.writeText(text);
document.getElementById("copyMsg").textContent = "JSON copied successfully!";
}

</script>

</body>
</html>
