<!DOCTYPE html>
<html lang="te">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading... - Namo Narayanaya</title>
    <link rel="icon" href="https://omnnbc.in/m/iIEkQ5" type="image/png">

    <style>
        body { margin: 0; font-family: Arial, sans-serif; background: #f9f9f9; }
        
        /* Main Container matching your PHP style */
        .main-wrapper { 
            padding: 15px; 
            background: #FFF9E6; 
            min-height: 100vh; 
            max-width: 800px; 
            margin: 0 auto; 
            box-sizing: border-box;
            border: 1px solid #eee;
        }

        /* Post title box - Yellow Style */
        .post-title-box { 
            background: #FFD966; 
            padding: 15px; 
            font-size: 24px; 
            font-weight: bold; 
            text-align: center; 
            margin-bottom: 20px; 
            border-radius: 5px; 
            color: #333;
            border-bottom: 2px solid #d81b60;
        }

        .post-content {
            font-size: 20px;
            line-height: 1.8;
            color: #222;
            white-space: pre-wrap; /* Keeps Telugu line breaks */
        }

        /* Share buttons styling */
        .share-buttons { margin-top: 20px; border-top: 1px solid #ddd; padding-top: 15px; }
        .share-buttons button { 
            margin: 5px 5px 5px 0; 
            padding: 10px 15px; 
            border: none; 
            border-radius: 4px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 14px; 
            color: white; 
        }
        .share-buttons input { 
            width: 80%; 
            padding: 8px; 
            margin-top: 10px; 
            border-radius: 4px; 
            border: 1px solid #ccc; 
        }

        /* Stats line */
        .stats-line { margin-top: 15px; font-weight: bold; color: #555; }

        .back-home {
            display: inline-block;
            margin-bottom: 15px;
            text-decoration: none;
            color: #d81b60;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="main-wrapper">
        <a href="index.html" class="back-home">‚Üê Home (‡∞Æ‡±ä‡∞¶‡∞ü‡∞ø ‡∞™‡±á‡∞ú‡±Ä)</a>

        <div id="post-title" class="post-title-box">Loading...</div>

        <div id="post-content" class="post-content">
            <p style="text-align:center;">‡∞∂‡±ã‡∞ß‡∞® ‡∞ú‡∞∞‡±Å‡∞ó‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...</p>
        </div>

        <div class="stats-line">
            üëç Like (<span id="like-count">0</span>) &nbsp;&nbsp; üëÅ Views: <span id="view-count">1</span>
        </div>

        <div class="share-buttons">
            <button onclick="shareWhatsApp()" style="background:#25D366;">WhatsApp</button>
            <button onclick="shareFacebook()" style="background:#3b5998;">Facebook</button>
            <button onclick="shareTelegram()" style="background:#0088cc;">Telegram</button>
            <br>
            <input type="text" readonly id="copyUrlText">
            <button onclick="copyLink()" style="background:#666;">Copy Link</button>
        </div>
    </div>

    <script>
        let currentPostTitle = "";
        let currentUrl = window.location.href;

        async function loadPostDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const slug = urlParams.get('id');

            if (!slug) {
                window.location.href = 'index.html';
                return;
            }

            try {
                // Fetch posts.json
                const response = await fetch('./data/posts.json');
                const posts = await response.json();
                
                // Fetch pages.json (Merging like your PHP array_merge)
                let pages = [];
                try {
                    const respPages = await fetch('./data/pages.json');
                    pages = await respPages.json();
                } catch(e) { console.log("No pages.json found"); }

                const allItems = [...posts, ...pages];
                const post = allItems.find(p => p.slug === slug);

                if (post) {
                    currentPostTitle = post.title;
                    document.title = post.title;
                    document.getElementById('post-title').innerText = post.title;
                    document.getElementById('post-content').innerHTML = post.content;
                    document.getElementById('copyUrlText').value = currentUrl;
                    
                    // Views Simulation (Since GitHub is static, we show a random base + local session)
                    document.getElementById('view-count').innerText = Math.floor(Math.random() * 100) + 120;
                } else {
                    document.getElementById('post-content').innerHTML = "Page not found.";
                }
            } catch (err) {
                document.getElementById('post-content').innerHTML = "Error loading data.";
            }
        }

        // Sharing Functions
        function shareWhatsApp() {
            const text = encodeURIComponent(currentPostTitle + " " + currentUrl);
            window.open(`https://api.whatsapp.com/send?text=${text}`, '_blank');
        }
        function shareFacebook() {
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentUrl)}`, '_blank');
        }
        function shareTelegram() {
            const text = encodeURIComponent(currentPostTitle);
            window.open(`https://t.me/share/url?url=${encodeURIComponent(currentUrl)}&text=${text}`, '_blank');
        }
        function copyLink() {
            const copyText = document.getElementById("copyUrlText");
            copyText.select();
            document.execCommand("copy");
            alert("‡∞≤‡∞ø‡∞Ç‡∞ï‡±ç ‡∞ï‡∞æ‡∞™‡±Ä ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø! (Link Copied)");
        }

        window.onload = loadPostDetails;
    </script>

</body>
</html>
